# PolyArb-X Web监控界面

## 🎨 专业级交易监控仪表板

现代化的Web UI界面，实时监控PolyArb-X套利系统的运行状态。

---

## 🚀 快速启动

### 方式 1: 使用启动脚本（推荐）

```bash
./start_ui.sh
```

### 方式 2: 直接启动

```bash
python3 ui/web_server.py --port 8080
```

### 方式 3: 自定义端口

```bash
python3 ui/web_server.py --port 8081
```

---

## 📱 访问界面

启动后，在浏览器中打开：

- **本地访问**: http://localhost:8080
- **网络访问**: http://0.0.0.0:8080

**推荐浏览器**:
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

---

## 🎯 界面功能

### 1. 系统概览

**顶部状态栏**:
- 🔵 运行模式（干运行/生产）
- 🟢 系统在线状态
- ⏱️ 运行时间计数器

### 2. 核心指标卡片

**📊 总交易数**
- 显示总交易量
- 今日新增交易数
- 完成率进度条

**🎯 胜率**
- 实时胜率百分比
- 目标: 60%
- 趋势指示器

**💰 净利润**
- 累计收益
- 日目标: $100
- 盈亏颜色指示

**📈 Sharpe比率**
- 风险调整收益
- 目标: 2.0
- 实时计算

### 3. 性能图表

- **实时收益曲线**: 使用Chart.js绘制
- **自动更新**: 每5秒刷新
- **平滑动画**: 渐变填充效果
- **响应式**: 自适应屏幕尺寸

### 4. 系统状态

实时显示：
- ✅ WebSocket连接状态
- ✅ Circuit Breaker状态
- ✅ Nonce Manager同步状态
- ⚠️ Gas价格监控

### 5. 活动日志

**最近活动**:
- 交易执行记录
- 系统事件
- 颜色编码（成功/失败/警告）

**系统终端**:
- 实时日志流
- 按级别分类（INFO/SUCCESS/WARNING/ERROR）
- 自动滚动
- 保留最近50条

---

## 🎨 设计特点

### 视觉效果

- **深色主题**: 专业交易风格
- **渐变色彩**: 蓝紫色调
- **动画效果**: 平滑过渡
- **发光效果**: 状态指示器
- **响应式布局**: 移动端友好

### 交互体验

- **实时更新**: 自动刷新数据
- **悬停效果**: 卡片浮动动画
- **进度条**: 动态加载效果
- **滚动条**: 自定义样式

---

## 🔧 技术栈

- **HTML5**: 现代化标记
- **CSS3**: 高级动画和布局
- **JavaScript**: 原生JS（无框架）
- **Chart.js**: 数据可视化
- **Python**: Web服务器后端

---

## 📊 API端点

### GET /api/status
获取系统状态
```json
{
  "status": "online",
  "mode": "dry-run",
  "websocket_connected": true,
  "uptime_seconds": 1234,
  "last_update": "2026-02-01T12:00:00"
}
```

### GET /api/metrics
获取性能指标
```json
{
  "total_trades": 100,
  "win_rate": 65.0,
  "net_profit": 250.50,
  "sharpe_ratio": 2.1
}
```

### GET /api/logs
获取系统日志
```json
{
  "logs": [
    "2026-02-01 12:00:00 | INFO | WebSocket connected",
    "2026-02-01 12:00:01 | SUCCESS | Trade executed"
  ]
}
```

---

## 🛠️ 自定义配置

### 修改端口

编辑 `start_ui.sh`:
```bash
PORT=8080  # 改为您想要的端口
```

### 修改样式

编辑 `ui/dashboard.html` 中的CSS变量：
```css
:root {
    --accent-blue: #3b82f6;      /* 主色调 */
    --accent-green: #10b981;     /* 成功色 */
    --accent-red: #ef4444;       /* 错误色 */
    --accent-yellow: #f59e0b;    /* 警告色 */
}
```

### 调整刷新频率

编辑 `ui/dashboard.html`:
```javascript
setInterval(() => {
    // 更新逻辑
}, 5000);  // 改为您想要的毫秒数
```

---

## 📱 移动端访问

### 局域网访问

1. **查看本机IP**:
   ```bash
   ifconfig | grep "inet " | grep -v 127.0.0.1
   ```

2. **手机浏览器访问**:
   ```
   http://192.168.x.x:8080
   ```

### 防火墙配置

如果无法访问，请开放端口：
```bash
# macOS
sudo pfctl -d

# Linux
sudo ufw allow 8080
```

---

## 🔍 故障排查

### 问题1: 端口被占用

```bash
# 查看占用端口的进程
lsof -i :8080

# 停止占用进程
kill -9 <PID>

# 或使用其他端口
./start_ui.sh  # 自动切换到8081
```

### 问题2: 页面无法访问

```bash
# 检查服务器状态
ps aux | grep web_server.py

# 重启服务器
./start_ui.sh
```

### 问题3: 数据不更新

- 检查后台系统是否运行
- 查看浏览器控制台错误
- 确认API端点可访问

---

## 🎯 最佳实践

### 使用建议

1. **多窗口监控**:
   - 主窗口: Web界面
   - 副窗口: 系统日志

2. **性能优化**:
   - 关闭不需要的浏览器标签
   - 使用有线网络连接
   - 定期清理浏览器缓存

3. **安全建议**:
   - 不要在公网暴露UI
   - 使用防火墙限制访问
   - 定期更换端口

---

## 📸 界面预览

界面包含：
- 🎨 现代化深色主题
- 📊 实时数据可视化
- ⚡ 流畅动画效果
- 📱 响应式设计
- 🌈 专业配色方案

---

## 🚀 下一步

**集成功能**:
- [ ] WebSocket实时数据推送
- [ ] 用户认证系统
- [ ] 历史数据查询
- [ ] 策略参数调整
- [ ] 告警通知系统

**增强体验**:
- [ ] 深色/浅色主题切换
- [ ] 自定义仪表板布局
- [ ] 导出报告功能
- [ ] 多语言支持

---

**创建时间**: 2026-02-01
**版本**: 1.0.0
**状态**: ✅ 生产就绪
