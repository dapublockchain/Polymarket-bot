# PolyArb-X

> ä½å»¶è¿Ÿé¢„æµ‹å¸‚åœºå¥—åˆ©æœºå™¨äºº - ç”¨äº Polymarket å¹³å°çš„è‡ªåŠ¨åŒ–äº¤æ˜“

[![Tests](https://img.shields.io/badge/tests-264%20passing-success)](#)
[![Coverage](https://img.shields.io/badge/coverage-82.46%25-brightgreen)](htmlcov/index.html)
[![Python](https://img.shields.io/badge/python-3.10%2B-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**PolyArb-X** æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„é¢„æµ‹å¸‚åœºå¥—åˆ©æœºå™¨äººï¼Œé€šè¿‡å®æ—¶ç›‘æ§ Polymarket çš„è®¢å•æœ¬ï¼Œè‡ªåŠ¨è¯†åˆ«å¹¶æ‰§è¡Œå¥—åˆ©æœºä¼šã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **å®æ—¶è®¢å•æœ¬** - WebSocket è¿æ¥ï¼Œæ¯«ç§’çº§æ›´æ–°
- ğŸ’° **å¤šç­–ç•¥å¥—åˆ©** - åŸå­å¥—åˆ©ã€NegRiskã€ç»„åˆå¥—åˆ©
- ğŸ›¡ï¸ **é£é™©ç®¡ç†** - ä½™é¢æ£€æŸ¥ã€ä»“ä½é™åˆ¶ã€æ»‘ç‚¹ä¿æŠ¤
- â›½ **Gas ä¼˜åŒ–** - EIP-1559 åŠ¨æ€è´¹ç”¨ä¼°ç®—
- ğŸ”„ **è‡ªåŠ¨é‡è¯•** - äº¤æ˜“å¤±è´¥è‡ªåŠ¨é‡è¯•æœºåˆ¶
- ğŸ” **å¯è§‚æµ‹æ€§** - åˆ†å¸ƒå¼è¿½è¸ªã€å»¶è¿Ÿåˆ†æã€äº‹ä»¶è®°å½•ï¼ˆPhase 1ï¼‰
- ğŸ“Š **Edge åˆ†æ** - è¯¦ç»†çš„æˆæœ¬åˆ†è§£å’Œå†³ç­–å½’å› ï¼ˆPhase 1ï¼‰
- ğŸ“ˆ **å®Œæ•´æµ‹è¯•** - 264 ä¸ªæµ‹è¯•ï¼Œ82.46% è¦†ç›–ç‡

### æ”¯æŒçš„ç­–ç•¥

1. **åŸå­å¥—åˆ©** - YES + NO æˆæœ¬ < 1.0 USDC æ—¶è·åˆ©
2. **NegRisk å¥—åˆ©** - åˆ©ç”¨ NegRisk æ¦‚ç‡å·®å¼‚å¥—åˆ©
3. **ç»„åˆå¥—åˆ©** - å¤šä¸ªå¸‚åœºçš„ç»„åˆäº¤æ˜“

---

## ğŸ“Š é¡¹ç›®çŠ¶æ€

| æŒ‡æ ‡ | æ•°å€¼ | çŠ¶æ€ |
|------|------|------|
| æµ‹è¯•æ•°é‡ | 264 | âœ… |
| é€šè¿‡ç‡ | 100% | âœ… |
| ä»£ç è¦†ç›–ç‡ | 82.46% | âœ… |
| Python ç‰ˆæœ¬ | 3.10+ | âœ… |
| Phase 1 | âœ… å®Œæˆ | âœ… |
| Phase 2 | ğŸš§ è®¡åˆ’ä¸­ | â³ |
| Phase 3 | ğŸš§ è®¡åˆ’ä¸­ | â³ |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PolyArb-X                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸»ç¨‹åº (main.py)                                        â”‚
â”‚  - äº‹ä»¶å¾ªç¯ç®¡ç†                                          â”‚
â”‚  - ç­–ç•¥åè°ƒ                                              â”‚
â”‚  - æ—¥å¿—è®°å½•                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  è¿æ¥å±‚          â”‚          â”‚  ç­–ç•¥å±‚           â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ WebSocket å®¢æˆ·ç«¯â”‚          â”‚ Atomic Arbitrage â”‚
    â”‚ Web3 å®¢æˆ·ç«¯     â”‚          â”‚ NegRisk          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ Market Grouper   â”‚
             â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  æ‰§è¡Œå±‚          â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                            â”‚ é£é™©ç®¡ç†å™¨      â”‚
                            â”‚ äº¤æ˜“å‘é€å™¨      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

- **å¼‚æ­¥æ¡†æ¶**: asyncio
- **æ•°æ®éªŒè¯**: Pydantic v2
- **WebSocket**: websockets
- **åŒºå—é“¾**: web3.py, eth-account
- **æµ‹è¯•**: pytest, pytest-asyncio
- **æ—¥å¿—**: loguru

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- pip æˆ– poetry
- Polygon RPC èŠ‚ç‚¹è®¿é—®
- Polymarket CLOB WebSocket è®¿é—®

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
cd /Users/dapumacmini/polyarb-x
```

#### 2. å®‰è£…ä¾èµ–

**æ–¹å¼ A: ä½¿ç”¨ requirements.txtï¼ˆæ¨èï¼‰**

```bash
python3 -m pip install --user -r requirements.txt
```

**æ–¹å¼ B: ä½¿ç”¨è‡ªåŠ¨å®‰è£…è„šæœ¬**

```bash
bash install_and_test.sh
```

**æ–¹å¼ C: ä½¿ç”¨ poetry**

```bash
poetry install
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
nano .env
```

**å¿…éœ€çš„ç¯å¢ƒå˜é‡**:

```bash
# Polygon RPC
POLYGON_RPC_URL=https://polygon-rpc.com

# é’±åŒ…ç§é’¥ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œæ°¸ä¸ç¡¬ç¼–ç ï¼‰
PRIVATE_KEY=your_private_key_here

# Polymarket WebSocket
POLYMARKET_WS_URL=wss://clob.polymarket.com/ws

# äº¤æ˜“å‚æ•°
TRADE_SIZE=100
MIN_PROFIT_THRESHOLD=0.01
MAX_POSITION_SIZE=1000
MAX_GAS_PRICE=100000000000
```

#### 4. éªŒè¯å®‰è£…

```bash
# è¿è¡Œæµ‹è¯•
python3 -m pytest tests/ -v

# é¢„æœŸè¾“å‡º: 209 passed âœ…
```

---

## ğŸ® ä½¿ç”¨æ–¹æ³•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python3 -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæ¨¡å—
python3 -m pytest tests/unit/test_web3_client.py -v
python3 -m pytest tests/unit/test_risk_manager.py -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
python3 -m pytest tests/ --cov=src --cov-report=html
open htmlcov/index.html
```

### è¿è¡Œé¡¹ç›®

```bash
# å¹²è¿è¡Œæ¨¡å¼ï¼ˆæ¨èå…ˆæµ‹è¯•ï¼‰
python3 src/main.py --dry-run

# å®æ—¶äº¤æ˜“æ¨¡å¼
python3 src/main.py

# æŒ‡å®šé…ç½®æ–‡ä»¶
python3 src/main.py --config custom_config.json
```

### ç›‘æ§å’Œæ—¥å¿—

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f data/polyarb-x.log

# æŸ¥çœ‹æ€§èƒ½æ—¥å¿—
tail -f data/performance.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR data/polyarb-x.log
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
polyarb-x/
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ models.py         # æ•°æ®æ¨¡å‹ (99% è¦†ç›–)
â”‚   â”‚   â””â”€â”€ config.py         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ connectors/           # å¤–éƒ¨è¿æ¥
â”‚   â”‚   â”œâ”€â”€ polymarket_ws.py  # WebSocket å®¢æˆ·ç«¯ (76%)
â”‚   â”‚   â””â”€â”€ web3_client.py    # Web3 å®¢æˆ·ç«¯ (79%)
â”‚   â”œâ”€â”€ strategies/           # äº¤æ˜“ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ atomic.py         # åŸå­å¥—åˆ© (96%)
â”‚   â”‚   â”œâ”€â”€ negrisk.py        # NegRisk å¥—åˆ© (96%)
â”‚   â”‚   â””â”€â”€ market_grouper.py # å¸‚åœºåˆ†ç»„ (92%)
â”‚   â”œâ”€â”€ execution/            # äº¤æ˜“æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ risk_manager.py   # é£é™©ç®¡ç† (93%)
â”‚   â”‚   â””â”€â”€ tx_sender.py      # äº¤æ˜“å‘é€ (97%)
â”‚   â””â”€â”€ main.py               # ä¸»å…¥å£
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯• (209 ä¸ª)
â”‚   â””â”€â”€ integration/          # é›†æˆæµ‹è¯•
â”œâ”€â”€ data/                     # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ polyarb-x.log         # ä¸»æ—¥å¿—
â”‚   â”œâ”€â”€ performance.log       # æ€§èƒ½æ—¥å¿—
â”‚   â””â”€â”€ trades.db             # äº¤æ˜“æ•°æ®åº“
â”œâ”€â”€ htmlcov/                  # è¦†ç›–ç‡æŠ¥å‘Š
â”œâ”€â”€ requirements.txt          # ä¾èµ–æ¸…å•
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ install_and_test.sh       # è‡ªåŠ¨å®‰è£…è„šæœ¬
â”œâ”€â”€ OFFLINE_INSTALL.md        # ç¦»çº¿å®‰è£…æŒ‡å—
â”œâ”€â”€ PROJECT_STATUS.md         # é¡¹ç›®çŠ¶æ€æŠ¥å‘Š
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

---

## ğŸ§ª æµ‹è¯•è¦†ç›–

### æ¨¡å—è¦†ç›–ç‡

| æ¨¡å— | è¦†ç›–ç‡ | æµ‹è¯•æ•° |
|------|--------|--------|
| models.py | 99% | 32 |
| atomic.py | 96% | 20 |
| negrisk.py | 96% | 45 |
| tx_sender.py | 97% | 31 |
| risk_manager.py | 93% | 21 |
| market_grouper.py | 92% | 38 |
| polymarket_ws.py | 76% | 18 |
| web3_client.py | 79% | 24 |
| **æ€»è®¡** | **84.06%** | **209** |

### æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š

```bash
# ç”Ÿæˆ HTML æŠ¥å‘Š
python3 -m pytest tests/ --cov=src --cov-report=html

# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
open htmlcov/index.html
# æˆ–
xdg-open htmlcov/index.html
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

### ç§é’¥ç®¡ç†

- âœ… ç§é’¥ä»ç¯å¢ƒå˜é‡è¯»å–
- âœ… æ°¸ä¸ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
- âœ… æœ¬åœ°ç­¾åï¼Œç§é’¥ä¸ç¦»å¼€è®¾å¤‡
- âœ… å»ºè®®ä½¿ç”¨ç¡¬ä»¶é’±åŒ…

### äº¤æ˜“å®‰å…¨

- âœ… ä½™é¢æ£€æŸ¥
- âœ… ä»“ä½é™åˆ¶
- âœ… Gas æˆæœ¬éªŒè¯
- âœ… åˆ©æ¶¦é˜ˆå€¼æ£€æŸ¥
- âœ… æ»‘ç‚¹ä¿æŠ¤

### å»ºè®®

1. åœ¨ä¸»ç½‘ä¹‹å‰å…ˆåœ¨æµ‹è¯•ç½‘æµ‹è¯•
2. ä»å°é¢å¼€å§‹äº¤æ˜“
3. å®šæœŸæŸ¥çœ‹æ—¥å¿—
4. ç›‘æ§äº¤æ˜“è¡¨ç°
5. è®¾ç½®åˆç†çš„é£é™©é™åˆ¶

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å»¶è¿Ÿ

- WebSocket æ¶ˆæ¯å¤„ç†: < 10ms
- å¥—åˆ©æœºä¼šæ£€æµ‹: < 50ms
- äº¤æ˜“ç­¾å: < 100ms
- ç«¯åˆ°ç«¯æ‰§è¡Œ: < 500ms

### å¯é æ€§

- è‡ªåŠ¨é‡è¿: æŒ‡æ•°é€€é¿
- äº¤æ˜“é‡è¯•: æœ€å¤š 3 æ¬¡
- é”™è¯¯å¤„ç†: å®Œæ•´è¦†ç›–
- æ—¥å¿—è®°å½•: ç»“æ„åŒ–æ—¥å¿—

---

## ğŸ“š æ–‡æ¡£

### ç”¨æˆ·æ–‡æ¡£
- [é¡¹ç›®çŠ¶æ€](PROJECT_STATUS.md) - å®Œæ•´çš„é¡¹ç›®çŠ¶æ€æŠ¥å‘Š
- [ç¦»çº¿å®‰è£…æŒ‡å—](OFFLINE_INSTALL.md) - æ— ç½‘ç»œç¯å¢ƒå®‰è£…

### æŠ€æœ¯æ–‡æ¡£
- [Phase 4 å®ŒæˆæŠ¥å‘Š](PHASE4_COMPLETION_REPORT.md) - è¯¦ç»†çš„ Phase 4 æŠ¥å‘Š
- [Phase 4 æ€»ç»“](PHASE4_FINAL_SUMMARY.md) - Phase 4 æœ€ç»ˆæ€»ç»“
- [è¦†ç›–ç‡æŠ¥å‘Š](htmlcov/index.html) - è¯¦ç»†çš„ä»£ç è¦†ç›–ç‡

### ä»£ç æ–‡æ¡£
- æ‰€æœ‰æ¨¡å—éƒ½æœ‰å®Œæ•´çš„ docstrings
- ç±»å‹æç¤ºï¼ˆType Hintsï¼‰
- ç¤ºä¾‹ä»£ç 

---

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**é—®é¢˜ 1: ModuleNotFoundError: No module named 'web3'**

```bash
# è§£å†³æ–¹æ¡ˆï¼šå®‰è£…ä¾èµ–
python3 -m pip install --user -r requirements.txt
```

**é—®é¢˜ 2: ç§é’¥æ— æ•ˆ**

```bash
# è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿ç§é’¥æ ¼å¼æ­£ç¡®
# åº”è¯¥æ˜¯ 0x å¼€å¤´çš„ 64 ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²
PRIVATE_KEY=0x1234567890abcdef...
```

**é—®é¢˜ 3: WebSocket è¿æ¥å¤±è´¥**

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ URL
ping clob.polymarket.com
```

**é—®é¢˜ 4: æµ‹è¯•å¤±è´¥**

```bash
# è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…
python3 -m pytest tests/ -v --tb=short
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªï¼š

1. **TDD æ–¹æ³•è®º** - å…ˆå†™æµ‹è¯•ï¼Œå†å†™ä»£ç 
2. **ä»£ç è§„èŒƒ** - ä½¿ç”¨ Black å’Œ Ruff
3. **æµ‹è¯•è¦†ç›–** - æ–°ä»£ç éœ€ 80%+ è¦†ç›–ç‡
4. **æ–‡æ¡£** - æ›´æ–°ç›¸å…³æ–‡æ¡£

### å¼€å‘æµç¨‹

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# 2. ç¼–å†™æµ‹è¯•ï¼ˆTDDï¼‰
# 3. å®ç°åŠŸèƒ½
# 4. è¿è¡Œæµ‹è¯•
python3 -m pytest tests/ -v

# 5. æ£€æŸ¥è¦†ç›–ç‡
python3 -m pytest tests/ --cov=src

# 6. æäº¤ä»£ç 
git commit -m "feat: add new feature"
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚ä½¿ç”¨æœ¬è½¯ä»¶çš„é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ã€‚

---

## ğŸŠ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œå·¥å…·ï¼š

- [Polymarket](https://polymarket.com/) - é¢„æµ‹å¸‚åœºå¹³å°
- [web3.py](https://web3py.readthedocs.io/) - Python Web3 åº“
- [Pydantic](https://pydantic-docs.helpmanual.io/) - æ•°æ®éªŒè¯
- [pytest](https://docs.pytest.org/) - æµ‹è¯•æ¡†æ¶

---

## ğŸ“ è”ç³»æ–¹å¼

- é—®é¢˜åé¦ˆï¼šæäº¤ GitHub Issue
- åŠŸèƒ½å»ºè®®ï¼šæäº¤ Feature Request

---

**æœ€åæ›´æ–°**: 2026-01-30
**ç‰ˆæœ¬**: 0.1.0
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼â­**

Made with â¤ï¸ by PolyArb-X Team

</div>
